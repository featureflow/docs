"use strict";(self.webpackChunkfeatureflow_docs=self.webpackChunkfeatureflow_docs||[]).push([[8130],{1008:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/java-5minute-4-d5de200c118c3a4daa532efb8da0cb61.png"},1165:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"Quickstart/java-5minute","title":"Java 5 Minute test","description":"Want to try us out? Let\'s do the 5 minute test:","source":"@site/versioned_docs/version-1.0.0/01-Quickstart/5-java-5minute.md","sourceDirName":"01-Quickstart","slug":"/java-5minute","permalink":"/1.0.0/java-5minute","draft":false,"unlisted":false,"tags":[],"version":"1.0.0","sidebarPosition":5,"frontMatter":{"title":"Java 5 Minute test","sidebar_label":"Java 5 Minute test","slug":"/java-5minute"},"sidebar":"docsSidebar","previous":{"title":"Javascript - 5 Minute test","permalink":"/1.0.0/javascript-5minute"},"next":{"title":"Create Features","permalink":"/1.0.0/create-features"}}');var r=n(4848),s=n(8453);const i={title:"Java 5 Minute test",sidebar_label:"Java 5 Minute test",slug:"/java-5minute"},l=void 0,o={},u=[{value:"Want to try us out? Let&#39;s do the 5 minute test:",id:"want-to-try-us-out-lets-do-the-5-minute-test",level:2},{value:"1. Clone - Clone the github repo from here:",id:"1-clone---clone-the-github-repo-from-here",level:3},{value:"2. Set your environment api Key",id:"2-set-your-environment-api-key",level:3},{value:"3. Evaluate a feature",id:"3-evaluate-a-feature",level:3},{value:"4. Run the program",id:"4-run-the-program",level:3},{value:"5. Update your feature",id:"5-update-your-feature",level:3},{value:"6. Complete!",id:"6-complete",level:3},{value:"The ten minute test",id:"the-ten-minute-test",level:2},{value:"Add some variants",id:"add-some-variants",level:4}];function d(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"want-to-try-us-out-lets-do-the-5-minute-test",children:"Want to try us out? Let's do the 5 minute test:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://app.featureflow.io/",children:"Firstly, If you haven't signed up yet you go and get a free account here"})}),"\n",(0,r.jsx)(t.p,{children:"Once signed up, we give you a default project with a test and production environment plus one example feature."}),"\n",(0,r.jsx)(t.p,{children:"Now your ready to go."}),"\n",(0,r.jsx)(t.h3,{id:"1-clone---clone-the-github-repo-from-here",children:"1. Clone - Clone the github repo from here:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"git clone https://github.com/featureflow/featureflow-fiveminute-java.git\n"})}),"\n",(0,r.jsx)(t.h3,{id:"2-set-your-environment-api-key",children:"2. Set your environment api Key"}),"\n",(0,r.jsxs)(t.p,{children:["Edit ",(0,r.jsx)(t.em,{children:"'HelloWorld.java'"})," to add your server environment API key."]}),"\n",(0,r.jsxs)(t.p,{children:["Replace ",(0,r.jsx)(t.code,{children:"{{YOUR_SERVER_ENVIRONMENT_API_KEY_HERE}}"})," with the key which can be retrieved under the 'API Keys' Link on the top right of your environment page."]}),"\n",(0,r.jsx)(t.p,{children:"This is your unique key - used to identify the server when you call to get your features."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Server Api Key",src:n(5421).A+"",width:"800",height:"600"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'FeatureFlowClient client = new FeatureFlowClient.Builder("{{YOUR_SERVER_ENVIRONMENT_API_KEY_HERE}}")\n'})}),"\n",(0,r.jsx)(t.h3,{id:"3-evaluate-a-feature",children:"3. Evaluate a feature"}),"\n",(0,r.jsx)(t.p,{children:"We will now evaluate a feature - to do this we need to set the feature key in the evaluate call. You can get the feature key from the features list in featureflow (in brackets) next to the name."}),"\n",(0,r.jsx)(t.p,{children:"If you have just created a new account you can use the 'example-feature' that we have created for you. We have already added an example of evaluating the 'example-feature' in the code"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Feature Key",src:n(4214).A+"",width:"798",height:"444"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:"if (client.evaluate(MyFeatures.EXAMPLE_FEATURE.getValue()).isOn()) {\n"})}),"\n",(0,r.jsx)(t.h3,{id:"4-run-the-program",children:"4. Run the program"}),"\n",(0,r.jsx)(t.p,{children:"Now, run the program and observe the output"}),"\n",(0,r.jsx)(t.p,{children:"You can run it using the mvn command as below (or of course debug it in your favourite IDE)."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"./mvnw clean compile assembly:single\n\njava -jar target/featureflow-fiveminute-java-1.0.0-SNAPSHOT-jar-with-dependencies.jar\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"The variant is not on!\n"})}),"\n",(0,r.jsx)(t.h3,{id:"5-update-your-feature",children:"5. Update your feature"}),"\n",(0,r.jsx)(t.p,{children:"In featureflow, toggle your feature on in your environment and observe the output."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"Received a control update event: example-feature variant: on\n"})}),"\n",(0,r.jsx)(t.h3,{id:"6-complete",children:"6. Complete!"}),"\n",(0,r.jsx)(t.p,{children:"You have simply and successfully enabled a very powerful way to manage and release your features."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Congratulations!"})," That was easy hey?"]}),"\n",(0,r.jsxs)(t.p,{children:["So what can I do with this? Have a look at our ",(0,r.jsx)(t.a,{href:"http://www.featureflow.io/",children:"Developer use cases"})]}),"\n",(0,r.jsx)(t.p,{children:"or continue below to try adding some user information to your evaluation."}),"\n",(0,r.jsx)(t.h2,{id:"the-ten-minute-test",children:"The ten minute test"}),"\n",(0,r.jsxs)(t.p,{children:["Now have a look at ",(0,r.jsx)(t.em,{children:"HelloWorldWithUser"})," to get and idea of how you can actively register, target and manage your features."]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Update HelloWorldWithUser.java and add your server API key as before."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Update pom.xml to call ",(0,r.jsx)(t.em,{children:"HelloWorldWithUser"})," as the main class"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-xml",children:"<plugin>\n  <artifactId>maven-assembly-plugin</artifactId>\n  <configuration>\n    <archive>\n      <manifest>\n        <mainClass>HelloWorldWithUser</mainClass>\n      </manifest>\n    </archive>\n    <descriptorRefs>\n      <descriptorRef>jar-with-dependencies</descriptorRef>\n    </descriptorRefs>\n  </configuration>\n</plugin>\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"3",children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"In HelloWorldWithUser we provide a user (in the 'getUser()' method) - the user contains information about which is used to evaluate which variant of a feature matches. We have also added another feature 'new-feature'."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Rebuild and run"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"./mvnw clean compile assembly:single\n\njava -jar target/featureflow-fiveminute-java-1.0.0-SNAPSHOT-jar-with-dependencies.jar\n"})}),"\n",(0,r.jsx)(t.p,{children:"Note that the new feature 'new-feature' will be automatically registered and added to your features list in the featureflow admin console, to create a feature in featureflow you only need create it in code. If you create it in the console first however it will be linked via the key."}),"\n",(0,r.jsxs)(t.ol,{start:"5",children:["\n",(0,r.jsx)(t.li,{children:"Now lets add a rule to target the feature. In featureflow,"}),"\n"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"click the 'Update Rules' button for 'example-feature'"}),"\n",(0,r.jsx)(t.li,{children:"click the 'Add Rule' button"}),"\n",(0,r.jsx)(t.li,{children:"add a rule which says IF 'user_role' is equal to 'admin' then show variant 'on' ELSE Default to variant 'off'"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Feature Rule",src:n(3231).A+"",width:"1796",height:"1128"})}),"\n",(0,r.jsxs)(t.ol,{start:"6",children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Rerun your application. We know the user has an 'admin' role (as its set in our user in code) - you will find that example-feature is on. Only admins will see this feature, everyone else will see the off variant."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Lets change the user to be a 'standard_user' - edit your code as such:"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'FeatureflowUser user = new FeatureflowUser("flo@example.com")\n                .withAttribute("age", 32)\n                .withAttribute("signup_date", new DateTime(2017, 1, 1, 12, 0, 0, 0))\n                .withStringAttributes("user_role", Arrays.asList("standard_user"))\n                .withAttribute("tier", "gold")\n'})}),"\n",(0,r.jsxs)(t.ol,{start:"8",children:["\n",(0,r.jsx)(t.li,{children:"Recompile and rerun the code and you will find that the example-feature is 'off' - we did not match the admin rule and so the 'standard_user' gets the 'off' variant."}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"add-some-variants",children:"Add some variants"}),"\n",(0,r.jsx)(t.p,{children:"Ok lets keep going, say you have a new version of your feature - it may be an improvement or a version you want to show only to particular users - you can define it as a new 'variant'"}),"\n",(0,r.jsxs)(t.ol,{start:"9",children:["\n",(0,r.jsx)(t.li,{children:"Click the 'Example Feature' title to edit the feature"}),"\n",(0,r.jsx)(t.li,{children:"Click 'Add variant' and name it 'Enhanced' with a key of 'enhanced' - this is our new version of the feature. Click 'update feature' to save."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Feature Variants",src:n(1008).A+"",width:"1766",height:"656"})}),"\n",(0,r.jsxs)(t.ol,{start:"11",children:["\n",(0,r.jsxs)(t.li,{children:["Click 'Update rules' for example feature. Set the rule to say:\n",(0,r.jsx)(t.em,{children:"'If user_role is equal to 'pvt_tester' then show variant 'Enhanced' ELSE default to variant on"})]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Feature Rules",src:n(7257).A+"",width:"2190",height:"1118"})}),"\n",(0,r.jsx)(t.p,{children:"You have just set up a simple production test scenario. Your 'pvt_tester' role will see the new version whilst all other users will see the standard 'on' version."}),"\n",(0,r.jsxs)(t.ol,{start:"12",children:["\n",(0,r.jsx)(t.li,{children:"Now you have the idea, try changing your 'user_role' in the code to 'pvt_tester' and see the resulting variant."}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'private static FeatureflowUser getUser(){\n        FeatureflowUser user = new FeatureflowUser("flo@example.com")\n                .withAttribute("age", 32)\n                .withAttribute(("signup_date", new DateTime(2017, 1, 1, 12, 0, 0, 0))\n                .withStringAttributes("user_role", Arrays.asList("pvt_tester"))\n                .withAttribute("tier", "gold");\n        return user;\n    }\n'})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Evaluation Outpu",src:n(1170).A+"",width:"979",height:"139"})}),"\n",(0,r.jsx)(t.p,{children:"We could go on, but I think our ten minutes are up."}),"\n",(0,r.jsxs)(t.p,{children:["You may wish to go a further and learn about ",(0,r.jsx)(t.a,{href:"/1.0.0/gradual-rollouts",children:"gradual rollouts"}),", more about ",(0,r.jsx)(t.a,{href:"/1.0.0/managing-feature-variants",children:"variants"})," and ",(0,r.jsx)(t.a,{href:"/1.0.0/targeting-features",children:"feature targeting"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"You may also want to try the same 5 minute test in the javascript API so you can get a synchronised front and back-end."}),"\n",(0,r.jsx)(t.p,{children:"Happy toggling!`"})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1170:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/java-5minute-6-31a508bcf4e132ac1e51cb304afeb377.png"},3231:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/java-5minute-3-39220c2efd2d7641b54db773bbb8f41a.png"},4214:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/java-5minute-2-712963ca43bdecf6d8089021feca18f4.png"},5421:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/java-5minute-1-b88c5b653d4da260f92be312d67d01d0.png"},7257:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/java-5minute-5-beca25594cc95ce3e4db88700aa73be3.png"},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var a=n(6540);const r={},s=a.createContext(r);function i(e){const t=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);