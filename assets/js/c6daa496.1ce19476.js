"use strict";(self.webpackChunkfeatureflow_docs=self.webpackChunkfeatureflow_docs||[]).push([[1195],{1905:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"SDK_Guides/nodejs","title":"Node.js SDK","description":"Get your Featureflow account at featureflow.io","source":"@site/versioned_docs/version-2.0.0/05-SDK_Guides/nodejs.mdx","sourceDirName":"05-SDK_Guides","slug":"/nodejs-sdk","permalink":"/nodejs-sdk","draft":false,"unlisted":false,"tags":[],"version":"2.0.0","frontMatter":{"title":"Node.js SDK","sidebar_label":"Node.js SDK","slug":"/nodejs-sdk"},"sidebar":"docsSidebar","previous":{"title":"AWS Lambda","permalink":"/using-featureflow-with-aws-lambda"},"next":{"title":"ReactJS Client","permalink":"/reactjs-client"}}');var a=r(4848),s=r(8453);const i={title:"Node.js SDK",sidebar_label:"Node.js SDK",slug:"/nodejs-sdk"},l=void 0,d={},o=[{value:"Installation",id:"installation",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Create a Featureflow Client",id:"create-a-featureflow-client",level:3},{value:"Waiting for Ready State",id:"waiting-for-ready-state",level:3},{value:"Evaluate a Feature",id:"evaluate-a-feature",level:3},{value:"User Targeting",id:"user-targeting",level:2},{value:"Pre-registering Features",id:"pre-registering-features",level:2},{value:"Environment Variable",id:"environment-variable",level:2},{value:"Express Integration",id:"express-integration",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Evaluate Methods",id:"evaluate-methods",level:3},{value:"UserBuilder Methods",id:"userbuilder-methods",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"License",id:"license",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["Get your Featureflow account at ",(0,a.jsx)(n.a,{href:"http://www.featureflow.io",children:"featureflow.io"})]}),"\n",(0,a.jsxs)(n.p,{children:["GitHub: ",(0,a.jsx)(n.a,{href:"https://github.com/featureflow/featureflow-node-sdk",children:"https://github.com/featureflow/featureflow-node-sdk"})]}),"\n",(0,a.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm install --save featureflow-node-sdk\n"})}),"\n",(0,a.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,a.jsx)(n.h3,{id:"create-a-featureflow-client",children:"Create a Featureflow Client"}),"\n",(0,a.jsxs)(n.p,{children:["Require the SDK and create a client with your ",(0,a.jsx)(n.strong,{children:"Server Environment API Key"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const Featureflow = require('featureflow-node-sdk');\n\nconst featureflow = new Featureflow.Client({\n  apiKey: 'sdk-srv-env-YOUR_API_KEY'\n});\n"})}),"\n",(0,a.jsx)(n.p,{children:"Or using ES6 imports:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"import Featureflow from 'featureflow-node-sdk';\n\nconst featureflow = new Featureflow.Client({\n  apiKey: 'sdk-srv-env-YOUR_API_KEY'\n});\n"})}),"\n",(0,a.jsx)(n.admonition,{title:"Singleton Pattern",type:"caution",children:(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"featureflow"})," client should be instantiated once and shared across your application. Do not create a new client for each request."]})}),"\n",(0,a.jsx)(n.h3,{id:"waiting-for-ready-state",children:"Waiting for Ready State"}),"\n",(0,a.jsxs)(n.p,{children:["The client loads feature rules asynchronously. Use the callback or ",(0,a.jsx)(n.code,{children:"ready()"})," method to ensure features are available:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// Option 1: Callback\nnew Featureflow.Client({ apiKey: 'YOUR_API_KEY' }, function(error, featureflow) {\n  // featureflow is ready to use\n});\n\n// Option 2: Ready method\nconst featureflow = new Featureflow.Client({ apiKey: 'YOUR_API_KEY' });\n\nfeatureflow.ready(function() {\n  // featureflow is ready to use\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"evaluate-a-feature",children:"Evaluate a Feature"}),"\n",(0,a.jsx)(n.p,{children:"Check the value of a feature flag:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"if (featureflow.evaluate('my-feature-key', user).isOn()) {\n  // Feature is enabled\n}\n\nif (featureflow.evaluate('my-feature-key', user).isOff()) {\n  // Feature is disabled\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"For custom variants:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"if (featureflow.evaluate('my-feature-key', user).is('red')) {\n  console.log('Showing red variant');\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"user-targeting",children:"User Targeting"}),"\n",(0,a.jsx)(n.p,{children:"Define users to target features to specific segments:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const user = new Featureflow.UserBuilder('unique-user-id')\n  .withAttribute('country', 'US')\n  .withAttribute('tier', 'gold')\n  .withAttributes('roles', ['USER_ADMIN', 'BETA_CUSTOMER'])\n  .build();\n\nfeatureflow.evaluate('my-feature', user).isOn();\n"})}),"\n",(0,a.jsx)(n.p,{children:"For simple cases, you can pass just the user ID:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"featureflow.evaluate('my-feature', 'user-123').isOn();\n"})}),"\n",(0,a.jsx)(n.h2,{id:"pre-registering-features",children:"Pre-registering Features"}),"\n",(0,a.jsx)(n.p,{children:"Define default variants for features that may not yet exist in Featureflow. These serve as failover values when the server is unreachable:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const featureflow = new Featureflow.Client({\n  apiKey: 'YOUR_API_KEY',\n  withFeatures: [\n    new Featureflow.Feature('feature-one', 'on').build(),\n    new Featureflow.Feature('feature-two').build(),        // defaults to 'off'\n    new Featureflow.Feature('feature-three', 'custom').build()\n  ]\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"environment-variable",children:"Environment Variable"}),"\n",(0,a.jsx)(n.p,{children:"You can set your API key via environment variable instead of passing it directly:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"export FEATUREFLOW_SERVER_KEY=sdk-srv-env-YOUR_API_KEY\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// No apiKey needed when env var is set\nconst featureflow = new Featureflow.Client();\n"})}),"\n",(0,a.jsx)(n.h2,{id:"express-integration",children:"Express Integration"}),"\n",(0,a.jsx)(n.p,{children:"For Express applications, initialize the client once at startup:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const express = require('express');\nconst Featureflow = require('featureflow-node-sdk');\n\nconst app = express();\n\nconst featureflow = new Featureflow.Client({\n  apiKey: 'sdk-srv-env-YOUR_API_KEY'\n});\n\nfeatureflow.ready(() => {\n  app.get('/', (req, res) => {\n    const user = new Featureflow.UserBuilder(req.user.id)\n      .withAttribute('plan', req.user.plan)\n      .build();\n\n    if (featureflow.evaluate('new-homepage', user).isOn()) {\n      res.render('homepage-new');\n    } else {\n      res.render('homepage');\n    }\n  });\n\n  app.listen(3000);\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:["See the full ",(0,a.jsx)(n.a,{href:"https://github.com/featureflow/featureflow-node-example",children:"Express example"})," on GitHub."]}),"\n",(0,a.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,a.jsx)(n.h3,{id:"evaluate-methods",children:"Evaluate Methods"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Method"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"evaluate(featureKey, user).isOn()"})}),(0,a.jsxs)(n.td,{children:["Returns ",(0,a.jsx)(n.code,{children:"true"})," if variant equals ",(0,a.jsx)(n.code,{children:'"on"'})]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"evaluate(featureKey, user).isOff()"})}),(0,a.jsxs)(n.td,{children:["Returns ",(0,a.jsx)(n.code,{children:"true"})," if variant equals ",(0,a.jsx)(n.code,{children:'"off"'})]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"evaluate(featureKey, user).is(value)"})}),(0,a.jsxs)(n.td,{children:["Returns ",(0,a.jsx)(n.code,{children:"true"})," if variant equals the specified value"]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"evaluate(featureKey, user).value()"})}),(0,a.jsx)(n.td,{children:"Returns the current variant value as a string"})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"userbuilder-methods",children:"UserBuilder Methods"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Method"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"withAttribute(key, value)"})}),(0,a.jsx)(n.td,{children:"Add a single attribute"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"withAttributes(key, array)"})}),(0,a.jsx)(n.td,{children:"Add an array attribute"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"build()"})}),(0,a.jsx)(n.td,{children:"Build the user object"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/gradual-rollouts",children:"Gradual Rollouts"})," \u2014 Release to a percentage of users"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/targeting-features",children:"Targeting Features"})," \u2014 Control who sees what"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/manage-feature-variants",children:"Managing Variants"})," \u2014 Create custom feature states"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/using-featureflow-with-aws-lambda",children:"AWS Lambda Guide"})," \u2014 Serverless integration"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,a.jsx)(n.p,{children:"Apache-2.0"})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>l});var t=r(6540);const a={},s=t.createContext(a);function i(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);