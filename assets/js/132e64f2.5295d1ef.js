"use strict";(self.webpackChunkfeatureflow_docs=self.webpackChunkfeatureflow_docs||[]).push([[241],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var u=n.createContext({}),s=function(e){var t=n.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=s(e.components);return n.createElement(u.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=s(a),m=r,h=d["".concat(u,".").concat(m)]||d[m]||c[m]||o;return a?n.createElement(h,l(l({ref:t},p),{},{components:a})):n.createElement(h,l({ref:t},p))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=m;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[d]="string"==typeof e?e:r,l[1]=i;for(var s=2;s<o;s++)l[s]=a[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5496:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var n=a(7462),r=(a(7294),a(3905));const o={title:"Java 5 Minute test",sidebar_label:"Java 5 Minute test",slug:"/java-5minute"},l=void 0,i={unversionedId:"Quickstart/java-5minute",id:"Quickstart/java-5minute",title:"Java 5 Minute test",description:"Want to try us out? Let's do the 5 minute test:",source:"@site/docs/01-Quickstart/5-java-5minute.md",sourceDirName:"01-Quickstart",slug:"/java-5minute",permalink:"/java-5minute",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Java 5 Minute test",sidebar_label:"Java 5 Minute test",slug:"/java-5minute"},sidebar:"docsSidebar",previous:{title:"Javascript - 5 Minute test",permalink:"/javascript-5minute"},next:{title:"Create Features",permalink:"/create-features"}},u={},s=[{value:"Want to try us out? Let&#39;s do the 5 minute test:",id:"want-to-try-us-out-lets-do-the-5-minute-test",level:2},{value:"1. Clone - Clone the github repo from here:",id:"1-clone---clone-the-github-repo-from-here",level:3},{value:"2. Set your environment api Key",id:"2-set-your-environment-api-key",level:3},{value:"3. Evaluate a feature",id:"3-evaluate-a-feature",level:3},{value:"4. Run the program",id:"4-run-the-program",level:3},{value:"5. Update your feature",id:"5-update-your-feature",level:3},{value:"6. Complete!",id:"6-complete",level:3},{value:"The ten minute test",id:"the-ten-minute-test",level:2},{value:"Add some variants",id:"add-some-variants",level:4}],p={toc:s};function d(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"want-to-try-us-out-lets-do-the-5-minute-test"},"Want to try us out? Let's do the 5 minute test:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://app.featureflow.io/"},"Firstly, If you haven't signed up yet you go and get a free account here")),(0,r.kt)("p",null,"Once signed up, we give you a default project with a test and production environment plus one example feature."),(0,r.kt)("p",null,"Now your ready to go."),(0,r.kt)("h3",{id:"1-clone---clone-the-github-repo-from-here"},"1. Clone - Clone the github repo from here:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/featureflow/featureflow-fiveminute-java.git\n")),(0,r.kt)("h3",{id:"2-set-your-environment-api-key"},"2. Set your environment api Key"),(0,r.kt)("p",null,"Edit ",(0,r.kt)("em",{parentName:"p"},"'HelloWorld.java'")," to add your server environment API key."),(0,r.kt)("p",null,"Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"{{YOUR_SERVER_ENVIRONMENT_API_KEY_HERE}}")," with the key which can be retrieved under the 'API Keys' Link on the top right of your environment page."),(0,r.kt)("p",null,"This is your unique key - used to identify the server when you call to get your features."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Server Api Key",src:a(4702).Z,width:"800",height:"600"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'FeatureFlowClient client = new FeatureFlowClient.Builder("{{YOUR_SERVER_ENVIRONMENT_API_KEY_HERE}}")\n')),(0,r.kt)("h3",{id:"3-evaluate-a-feature"},"3. Evaluate a feature"),(0,r.kt)("p",null,"We will now evaluate a feature - to do this we need to set the feature key in the evaluate call. You can get the feature key from the features list in featureflow (in brackets) next to the name."),(0,r.kt)("p",null,"If you have just created a new account you can use the 'example-feature' that we have created for you. We have already added an example of evaluating the 'example-feature' in the code"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Feature Key",src:a(6767).Z,width:"798",height:"444"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"if (client.evaluate(MyFeatures.EXAMPLE_FEATURE.getValue()).isOn()) {\n")),(0,r.kt)("h3",{id:"4-run-the-program"},"4. Run the program"),(0,r.kt)("p",null,"Now, run the program and observe the output"),(0,r.kt)("p",null,"You can run it using the mvn command as below (or of course debug it in your favourite IDE)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"./mvnw clean compile assembly:single\n\njava -jar target/featureflow-fiveminute-java-1.0.0-SNAPSHOT-jar-with-dependencies.jar\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"The variant is not on!\n")),(0,r.kt)("h3",{id:"5-update-your-feature"},"5. Update your feature"),(0,r.kt)("p",null,"In featureflow, toggle your feature on in your environment and observe the output."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Received a control update event: example-feature variant: on\n")),(0,r.kt)("h3",{id:"6-complete"},"6. Complete!"),(0,r.kt)("p",null,"You have simply and successfully enabled a very powerful way to manage and release your features."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Congratulations!")," That was easy hey?"),(0,r.kt)("p",null,"So what can I do with this? Have a look at our ",(0,r.kt)("a",{parentName:"p",href:"http://www.featureflow.io/"},"Developer use cases")),(0,r.kt)("p",null,"or continue below to try adding some user information to your evaluation."),(0,r.kt)("h2",{id:"the-ten-minute-test"},"The ten minute test"),(0,r.kt)("p",null,"Now have a look at ",(0,r.kt)("em",{parentName:"p"},"HelloWorldWithUser")," to get and idea of how you can actively register, target and manage your features."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Update HelloWorldWithUser.java and add your server API key as before.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Update pom.xml to call ",(0,r.kt)("em",{parentName:"p"},"HelloWorldWithUser")," as the main class"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<plugin>\n  <artifactId>maven-assembly-plugin</artifactId>\n  <configuration>\n    <archive>\n      <manifest>\n        <mainClass>HelloWorldWithUser</mainClass>\n      </manifest>\n    </archive>\n    <descriptorRefs>\n      <descriptorRef>jar-with-dependencies</descriptorRef>\n    </descriptorRefs>\n  </configuration>\n</plugin>\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In HelloWorldWithUser we provide a user (in the 'getUser()' method) - the user contains information about which is used to evaluate which variant of a feature matches. We have also added another feature 'new-feature'.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Rebuild and run"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"./mvnw clean compile assembly:single\n\njava -jar target/featureflow-fiveminute-java-1.0.0-SNAPSHOT-jar-with-dependencies.jar\n")),(0,r.kt)("p",null,"Note that the new feature 'new-feature' will be automatically registered and added to your features list in the featureflow admin console, to create a feature in featureflow you only need create it in code. If you create it in the console first however it will be linked via the key."),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"Now lets add a rule to target the feature. In featureflow,")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"click the 'Update Rules' button for 'example-feature' "),(0,r.kt)("li",{parentName:"ul"},"click the 'Add Rule' button "),(0,r.kt)("li",{parentName:"ul"},"add a rule which says IF 'user_role' is equal to 'admin' then show variant 'on' ELSE Default to variant 'off'")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Feature Rule",src:a(5931).Z,width:"1796",height:"1128"})),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Rerun your application. We know the user has an 'admin' role (as its set in our user in code) - you will find that example-feature is on. Only admins will see this feature, everyone else will see the off variant.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Lets change the user to be a 'standard_user' - edit your code as such:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'FeatureflowUser user = new FeatureflowUser("flo@example.com")\n                .withAttribute("age", 32)\n                .withAttribute("signup_date", new DateTime(2017, 1, 1, 12, 0, 0, 0))\n                .withStringAttributes("user_role", Arrays.asList("standard_user"))\n                .withAttribute("tier", "gold")\n')),(0,r.kt)("ol",{start:8},(0,r.kt)("li",{parentName:"ol"},"Recompile and rerun the code and you will find that the example-feature is 'off' - we did not match the admin rule and so the 'standard_user' gets the 'off' variant.")),(0,r.kt)("h4",{id:"add-some-variants"},"Add some variants"),(0,r.kt)("p",null,"Ok lets keep going, say you have a new version of your feature - it may be an improvement or a version you want to show only to particular users - you can define it as a new 'variant'"),(0,r.kt)("ol",{start:9},(0,r.kt)("li",{parentName:"ol"},"Click the 'Example Feature' title to edit the feature"),(0,r.kt)("li",{parentName:"ol"},"Click 'Add variant' and name it 'Enhanced' with a key of 'enhanced' - this is our new version of the feature. Click 'update feature' to save.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Feature Variants",src:a(7357).Z,width:"1766",height:"656"})),(0,r.kt)("ol",{start:11},(0,r.kt)("li",{parentName:"ol"},"Click 'Update rules' for example feature. Set the rule to say:\n",(0,r.kt)("em",{parentName:"li"},"'If user_role is equal to 'pvt_tester' then show variant 'Enhanced' ELSE default to variant on"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Feature Rules",src:a(6905).Z,width:"2190",height:"1118"})),(0,r.kt)("p",null,"You have just set up a simple production test scenario. Your 'pvt_tester' role will see the new version whilst all other users will see the standard 'on' version."),(0,r.kt)("ol",{start:12},(0,r.kt)("li",{parentName:"ol"},"Now you have the idea, try changing your 'user_role' in the code to 'pvt_tester' and see the resulting variant.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'private static FeatureflowUser getUser(){\n        FeatureflowUser user = new FeatureflowUser("flo@example.com")\n                .withAttribute("age", 32)\n                .withAttribute(("signup_date", new DateTime(2017, 1, 1, 12, 0, 0, 0))\n                .withStringAttributes("user_role", Arrays.asList("pvt_tester"))\n                .withAttribute("tier", "gold");\n        return user;\n    }\n')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Evaluation Outpu",src:a(5764).Z,width:"979",height:"139"})),(0,r.kt)("p",null,"We could go on, but I think our ten minutes are up."),(0,r.kt)("p",null,"You may wish to go a further and learn about ",(0,r.kt)("a",{parentName:"p",href:"/gradual-rollouts"},"gradual rollouts"),", more about ",(0,r.kt)("a",{parentName:"p",href:"/managing-feature-variants"},"variants")," and ",(0,r.kt)("a",{parentName:"p",href:"/targeting-features"},"feature targeting"),"."),(0,r.kt)("p",null,"You may also want to try the same 5 minute test in the javascript API so you can get a synchronised front and back-end."),(0,r.kt)("p",null,"Happy toggling!`"))}d.isMDXComponent=!0},4702:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/java-5minute-1-b88c5b653d4da260f92be312d67d01d0.png"},6767:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/java-5minute-2-712963ca43bdecf6d8089021feca18f4.png"},5931:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/java-5minute-3-39220c2efd2d7641b54db773bbb8f41a.png"},7357:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/java-5minute-4-d5de200c118c3a4daa532efb8da0cb61.png"},6905:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/java-5minute-5-beca25594cc95ce3e4db88700aa73be3.png"},5764:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/java-5minute-6-31a508bcf4e132ac1e51cb304afeb377.png"}}]);